<!DOCTYPE html>
<html class="loading" dir="ltr" lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>8.1.4.3 Debugging DHCPv4</title>
    <!-- Content -->
    <link rel="stylesheet" type="text/css" href="../../common-ext/styles/page.css"/>
    <script type="text/javascript" src="../../common-ext/scripts/jquery-2.1.0.min.js"></script>
    <script type="text/javascript" src="../../common-ext/scripts/permission.js"></script>
    <script type="text/javascript" src="../../common-ext/scripts/page.js"></script>
    <script type="text/javascript" src="media/override.js"></script>
    <script>
      var media_transcript_file = "media_8.1.4.3_longdesc.txt";
    </script>
  </head>
  <body>
    <div id="text-container" role="main">
      <div id="text">
        <h1>Debugging DHCPv4</h1>
        <div>
          <p>On routers configured as DHCPv4 servers, the DHCPv4 process fails if the router is not receiving requests from the client. As a troubleshooting task, verify that the router is receiving the DHCPv4 request from the client. This troubleshooting step involves configuring an ACL for debugging output.</p>
          <p></p>
          <p>
            <b>Note</b>: Although you can copy the extended ACL shown in the figure and use it to filter DHCP messages, the configuration of extended ACLs are beyond the scope of this course.</p>
          <p></p>
          <p>The figure shows an extended ACL permitting only packets with UDP destination ports of 67 or 68. These are the typical ports used by DHCPv4 clients and servers when sending DHCPv4 messages. The extended ACL is used with the <b>debug ip packet</b> command to display only DHCPv4 messages.</p>
          <p></p>
          <p>The output in the figure shows that the router is receiving DHCP requests from the client. The source IP address is 0.0.0.0 because the client does not yet have an IP address. The destination is 255.255.255.255 because the DHCP discovery message from the client is sent as a broadcast. This output only shows a summary of the packet and not the DHCPv4 message itself. Nevertheless, the router did receive a broadcast packet with the source and destination IP and UDP ports that are correct for DHCPv4. The complete debug output shows all the packets in the DHCPv4 communications between the DHCPv4 server and client.</p>
          <p></p>
          <p>Another useful command for troubleshooting DHCPv4 operation is the <b>debug ip dhcp server events</b> command. This command reports server events, like address assignments and database updates. </p>
        </div>
      </div>
      <div id="text-handle" title="Resize" role="button"></div>
    </div>
    <div id="media-container" role="complementary">
      <iframe id="media" title="interactive graphic" aria-label="interactive graphic" aria-describedby="media-description"></iframe>
      <div id="media-description">Figure shows an extended A.C.L. permitting only packets with u.d.p. destination ports of 67 or 68.  The first command is, access hyphen list 100 permit u.d.p. any e.q. 67.  The second line of the A.C.L. is, access hyphen list 100 permit u.d.p. any e.q. 68.  The figure then runs the command, debug i.p. packet 100.  This is used to view activity that matches A.C.L. 100, which is the A.C.L. configured to allow d.h.c.p.  The figure shows the router receiving two broadcast packets from source i.p. 255 dot 255 dot 255 dot 255, which are d.h.c.p. requests.  The last command in the figure is, debug i.p. d.h.c.p. server events.  This command will report server events, and in the figure d.h.c.p. activity on the server is displayed.  This activity includes an i.p. address being returned to the pool, and an i.p. address being assigned.</div>
    </div>
    <div id="login">Please log into <a href="http://netacad.com">netacad.com</a> before accessing this course.</div>
  </body>
</html>
